{% extends "base.html" %}

{% block body %}
{{ super() }}

{#
 # when rendering this template, you have to pass in values for these arguments:
 #
 # - worldist_metadata, which is a dictionary containing these fields:
 #
 #     - wordlist_id
 #     - citation
 #     - sqlcode
 #     - list_type
 #     - name
 #
 # the above are the fields returned by a WORDLIST_METADATA_RESPONSE_SCHEMA.  wordlist_id and list_type are
 # the only of these that cannot be edited, so they must be kept hidden.
 #
 # we also need these:
 #
 # - wordlist_tags    (the tags part of a WORDLIST_TAG_RESPONSE_SCHEMA)
 #}
<div class="listattributes">
    {% include 'header.html' %}
    <form action="/edit_list_attributes" method="post">
        <input type="hidden" value="{{ wordlist_metadata.wordlist_id }}" name="wordlist_id"/>
        <input type="hidden" value="{{ wordlist_metadata.list_type }}" name="list_type"/>
        <table>
            <tr>
                <td>List Name:</td>
                <td><input type="text" value="{{ wordlist_metadata.name }}" name="name" size="60"></td>
            </tr>
            <tr>
                <td>Source:</td>
                <td><input type="text" value="{{ wordlist_metadata.citation }}" name="citation" size="60"></td>
            </tr>
        </table>
        {% if wordlist_metadata.list_type == 'empty' or wordlist_metadata.list_type == 'smart' %}
        <h2>Code</h2>
        Should be a sql statement that selects a single column called 'word_id.'<br>
        <textarea class="sqlcode" name="sqlcode">{{ wordlist_metadata.sqlcode }}</textarea>
        <br>
        {% endif %}
        {% if wordlist_metadata.list_type == 'standard' or wordlist_metadata.list_type == 'empty' %}
        <div class="tag_editor">
            <h2>Tags</h2>
            <table>
                <tr>
                    <th>Add Tags</th>
                </tr>
                <tr>
                    <td>
                        <input type="text"
                               class="add_tags"
                               value="{{ add_tags }}"
                               placeholder="add tags (comma separated)"
                               name="add_tags">
                    </td>
                </tr>
            </table>
            {% if wordlist_tags|length > 1 %}
            <table>
                <tr>
                    <th>Edit Tags</th>
                </tr>
                {% for t in wordlist_tags %}
                <tr>
                    <td>
                        <input type="text"
                               class="edit_tag"
                               name="{{ 'tag-' + t['wordlist_tag_id']|string }}"
                               value="{{ t['tag'] }}">
                    </td>
                </tr>
                {% endfor %}
            </table>
            {% endif %}
            <input type="submit" value="Update list details"/>
        </div>
        {% endif %}
    </form>
</div>
{% endblock %}

